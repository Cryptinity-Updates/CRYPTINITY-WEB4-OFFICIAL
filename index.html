<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRYPTINITY WEB4 - The Future of SocialFi</title>
    
    <!-- 1. STYLING ENGINE -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. REACT ENGINE (Global UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 3. CODE COMPILER -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- 4. ICONS -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- 5. FONTS -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        /* --- WEB4 VISUAL CORE --- */
        :root {
            --neon-blue: #3b82f6;
            --neon-purple: #a855f7;
            --glass-bg: rgba(13, 18, 30, 0.8);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        body { 
            font-family: 'Inter', sans-serif; 
            background-color: #050b14; 
            color: #e2e8f0; 
            overflow-x: hidden;
        }

        .font-mono { font-family: 'JetBrains Mono', monospace; }

        /* HOLOGRAPHIC PANELS */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }

        /* MOVING CYBER GRID */
        .cyber-grid {
            position: fixed;
            top: 0; left: 0; width: 200%; height: 200%;
            background-size: 50px 50px;
            background-image: 
                linear-gradient(to right, rgba(59, 130, 246, 0.05) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(59, 130, 246, 0.05) 1px, transparent 1px);
            transform: perspective(500px) rotateX(60deg);
            animation: grid-move 20s linear infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes grid-move {
            0% { transform: perspective(500px) rotateX(60deg) translateY(0); }
            100% { transform: perspective(500px) rotateX(60deg) translateY(50px); }
        }

        /* NEON GLOWS */
        .neon-text { text-shadow: 0 0 10px rgba(59, 130, 246, 0.8); }
        .btn-glow:hover { box-shadow: 0 0 20px rgba(59, 130, 246, 0.6); }
        
        /* CUSTOM SCROLLBAR */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #050b14; }
        ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 3px; }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- MAIN APP LOGIC -->
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // ICON MAPPING (Since we aren't using imports, we map lucide globals)
        const Icons = {
            Wallet: () => <i data-lucide="wallet"></i>,
            Cpu: () => <i data-lucide="cpu"></i>,
            Zap: () => <i data-lucide="zap"></i>,
            User: () => <i data-lucide="user"></i>,
            Lock: () => <i data-lucide="lock"></i>,
            Globe: () => <i data-lucide="globe"></i>,
            Send: () => <i data-lucide="send"></i>,
            Camera: () => <i data-lucide="camera"></i>,
            Video: () => <i data-lucide="video"></i>,
            MessageCircle: () => <i data-lucide="message-circle"></i>,
            ShoppingBag: () => <i data-lucide="shopping-bag"></i>,
            TrendingUp: () => <i data-lucide="trending-up"></i>,
            Gamepad2: () => <i data-lucide="gamepad-2"></i>,
            FileText: () => <i data-lucide="file-text"></i>,
            Layers: () => <i data-lucide="layers"></i>,
            ShieldCheck: () => <i data-lucide="shield-check"></i>,
            Activity: () => <i data-lucide="activity"></i>,
            Copy: () => <i data-lucide="copy"></i>,
            Edit: () => <i data-lucide="edit"></i>,
            Image: () => <i data-lucide="image"></i>,
            X: () => <i data-lucide="x"></i>,
            Heart: () => <i data-lucide="heart"></i>,
            Share2: () => <i data-lucide="share-2"></i>,
            Link: () => <i data-lucide="link"></i>
        };

        // --- ASSETS ---
        const LOGO_URL = "https://img.sanishtech.com/u/737f24149e86e68ecb670a074c19c72a.png";
        const NEWS = [
            { cat: "CRYPTO", title: "Bitcoin Halving Cycle Analysis: Bull Run Imminent?" },
            { cat: "GAME", title: "Ubisoft Announces Web4 RPG Integration" },
            { cat: "CTY", title: "Cryptinity Foundation Locks Liquidity for 5 Years" },
            { cat: "TECH", title: "Solana Mobile Chapter 2 Sold Out" }
        ];

        // --- COMPONENTS ---

        const Icon = ({ name, size=16, className="" }) => {
            useEffect(() => { lucide.createIcons(); });
            return <span className={className} style={{width: size, height: size, display: 'inline-block'}}><i data-lucide={name}></i></span>
        };

        const BackgroundFX = () => (
            <>
                <div className="cyber-grid opacity-20"></div>
                <div className="fixed inset-0 pointer-events-none">
                    <div className="absolute top-[-10%] left-[-10%] w-[50%] h-[50%] bg-blue-600/20 rounded-full blur-[120px] animate-pulse"></div>
                    <div className="absolute bottom-[-10%] right-[-10%] w-[50%] h-[50%] bg-purple-600/20 rounded-full blur-[120px] animate-pulse delay-1000"></div>
                </div>
            </>
        );

        const Countdown = () => {
            const [time, setTime] = useState({ d: 29, h: 23, m: 59, s: 59 });
            useEffect(() => {
                const t = setInterval(() => {
                    setTime(prev => {
                        let { d, h, m, s } = prev;
                        s--; if (s < 0) { s = 59; m--; } if (m < 0) { m = 59; h--; } if (h < 0) { h = 23; d--; }
                        return { d, h, m, s };
                    });
                }, 1000);
                return () => clearInterval(t);
            }, []);

            const Unit = ({ v, l }) => (
                <div className="flex flex-col items-center justify-center w-16 p-2 rounded-xl border border-blue-500/30 bg-black/40 backdrop-blur-md">
                    <span className="text-2xl font-black text-white font-mono">{String(v).padStart(2, '0')}</span>
                    <span className="text-[10px] text-blue-400 font-bold tracking-widest">{l}</span>
                </div>
            );
            return <div className="flex justify-center gap-3 my-8"><Unit v={time.d} l="DAY"/><Unit v={time.h} l="HR"/><Unit v={time.m} l="MIN"/><Unit v={time.s} l="SEC"/></div>;
        };

        const ChatWidget = ({ onClose }) => {
            const [msgs, setMsgs] = useState([{ id: 1, from: 'System', text: 'Welcome to Cryptinity Live Chat!' }]);
            const [input, setInput] = useState("");
            
            const send = () => {
                if(!input) return;
                setMsgs([...msgs, { id: Date.now(), from: 'Me', text: input }]);
                setInput("");
                setTimeout(() => setMsgs(prev => [...prev, { id: Date.now()+1, from: 'CryptoKing', text: 'LFG! ðŸš€' }]), 1500);
            };

            return (
                <div className="fixed inset-0 z-[100] flex items-center justify-center bg-black/80 backdrop-blur-sm p-4">
                    <div className="w-full max-w-md h-[500px] glass-panel rounded-2xl flex flex-col overflow-hidden border-blue-500/30">
                        <div className="p-3 border-b border-white/10 flex justify-between items-center bg-blue-900/20">
                            <div className="font-bold text-white flex items-center gap-2"><Icon name="message-circle" className="text-blue-400"/> Web4 Messenger</div>
                            <button onClick={onClose} className="text-gray-400"><Icon name="x"/></button>
                        </div>
                        <div className="flex-1 bg-black/40 p-4 overflow-y-auto space-y-3">
                            {msgs.map((m, i) => (
                                <div key={i} className={`flex ${m.from === 'Me' ? 'justify-end' : 'justify-start'}`}>
                                    <div className={`p-2 px-3 rounded-xl text-sm ${m.from === 'Me' ? 'bg-blue-600 text-white' : 'bg-gray-700 text-gray-200'}`}>
                                        <div className="text-[9px] opacity-50 mb-1">{m.from}</div>
                                        {m.text}
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="p-3 border-t border-white/10 bg-black/60 flex gap-2">
                            <input value={input} onChange={e => setInput(e.target.value)} className="flex-1 bg-white/5 border border-white/10 rounded-lg px-3 py-2 text-sm text-white" placeholder="Type..." />
                            <button onClick={send} className="bg-blue-600 p-2 rounded-lg text-white"><Icon name="send"/></button>
                        </div>
                    </div>
                </div>
            );
        };

        const UserProfile = ({ address }) => {
            const [profile, setProfile] = useState(() => JSON.parse(localStorage.getItem('cty_profile')) || { name: "Web4 Citizen", tagline: "Early Adopter", bgUrl: "" });
            const [posts, setPosts] = useState([{ id: 1, user: "Admin", text: "Pre-Launch Mining is Live!", time: "Pinned", likes: 884 }]);
            const [input, setInput] = useState("");
            const [isEdit, setIsEdit] = useState(false);
            const [showChat, setShowChat] = useState(false);

            const save = () => { localStorage.setItem('cty_profile', JSON.stringify(profile)); setIsEdit(false); };
            
            const handleFile = (e, type) => {
                const file = e.target.files[0];
                if(file) {
                    const url = URL.createObjectURL(file);
                    setPosts([{ id: Date.now(), user: profile.name, text: type === 'video' ? "Uploaded Video" : "Uploaded Photo", time: "Just now", media: { type, url }, likes: 0 }, ...posts]);
                }
            };

            const addPost = () => {
                if(!input) return;
                setPosts([{ id: Date.now(), user: profile.name, text: input, time: "Just now", likes: 0 }, ...posts]);
                setInput("");
            };

            return (
                <div className="h-full glass-panel rounded-3xl overflow-hidden flex flex-col relative transition-all duration-500"
                    style={{ backgroundImage: profile.bgUrl ? `url(${profile.bgUrl})` : 'none', backgroundSize: 'cover', backgroundPosition: 'center' }}>
                    {profile.bgUrl && <div className="absolute inset-0 bg-black/80 backdrop-blur-[2px] z-0"></div>}
                    <div className="relative z-10 p-6 flex-1 flex flex-col h-full">
                        {/* Profile Header */}
                        <div className="flex justify-between mb-6">
                            <div className="flex gap-4 items-center">
                                <div className="w-16 h-16 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 p-[2px]"><div className="w-full h-full bg-black rounded-full flex items-center justify-center"><Icon name="user" size={32} className="text-white"/></div></div>
                                <div>
                                    {isEdit ? (
                                        <div className="flex flex-col gap-2">
                                            <input value={profile.name} onChange={e => setProfile({...profile, name: e.target.value})} className="bg-white/10 border border-white/20 rounded px-2 py-1 text-white text-sm" placeholder="Name"/>
                                            <input value={profile.bgUrl} onChange={e => setProfile({...profile, bgUrl: e.target.value})} className="bg-white/10 border border-white/20 rounded px-2 py-1 text-white text-xs" placeholder="Background Image URL"/>
                                        </div>
                                    ) : (
                                        <>
                                            <div className="text-white font-bold text-lg">{profile.name}</div>
                                            <div className="text-blue-400 text-xs font-mono">{address.substring(0,8)}...</div>
                                        </>
                                    )}
                                </div>
                            </div>
                            <div className="flex gap-2">
                                <button onClick={() => setShowChat(true)} className="bg-blue-600 p-2 rounded-full text-white"><Icon name="message-circle"/></button>
                                <button onClick={() => isEdit ? save() : setIsEdit(true)} className="bg-white/10 p-2 rounded-full text-white">{isEdit ? <Icon name="check"/> : <Icon name="edit"/>}</button>
                            </div>
                        </div>

                        {/* Composer */}
                        <div className="bg-black/30 rounded-xl p-3 mb-4 border border-white/5">
                            <textarea value={input} onChange={e => setInput(e.target.value)} className="w-full bg-transparent text-sm text-white outline-none h-12" placeholder="What's happening?" />
                            <div className="flex justify-between items-center mt-2 pt-2 border-t border-white/10">
                                <div className="flex gap-3 text-gray-500">
                                    <label className="cursor-pointer hover:text-blue-400"><input type="file" hidden accept="image/*" onChange={e => handleFile(e, 'image')}/><Icon name="camera" size={16}/> Photo</label>
                                    <label className="cursor-pointer hover:text-blue-400"><input type="file" hidden accept="video/*" onChange={e => handleFile(e, 'video')}/><Icon name="video" size={16}/> Video</label>
                                </div>
                                <button onClick={addPost} className="bg-blue-600 text-white px-4 py-1 rounded text-xs font-bold">Post</button>
                            </div>
                        </div>

                        {/* Feed */}
                        <div className="flex-1 overflow-y-auto space-y-3 pr-2">
                            {posts.map(p => (
                                <div key={p.id} className="bg-black/40 rounded-xl p-3 border border-white/5">
                                    <div className="flex justify-between mb-2"><span className="font-bold text-blue-400 text-xs">{p.user}</span><span className="text-[10px] text-gray-500">{p.time}</span></div>
                                    <p className="text-sm text-gray-200 mb-2">{p.text}</p>
                                    {p.media && p.media.type === 'image' && <img src={p.media.url} className="w-full rounded-lg mb-2 border border-white/10" />}
                                    {p.media && p.media.type === 'video' && <video src={p.media.url} controls className="w-full rounded-lg mb-2 border border-white/10" />}
                                    <div className="flex gap-4 text-gray-500 text-xs"><span className="flex items-center gap-1"><Icon name="heart" size={12}/> {p.likes}</span><span className="flex items-center gap-1"><Icon name="share-2" size={12}/> Share</span></div>
                                </div>
                            ))}
                        </div>
                    </div>
                    <ChatWidget isOpen={showChat} onClose={() => setShowChat(false)}/>
                </div>
            );
        };

        // --- MAIN APP ---
        const App = () => {
            const [address, setAddress] = useState(() => localStorage.getItem('cty_address') || null);
            const [miningBal, setMiningBal] = useState(() => parseFloat(localStorage.getItem('cty_bal')) || 0.000000);
            const [newsIdx, setNewsIdx] = useState(0);

            useEffect(() => {
                const i = setInterval(() => { setMiningBal(p => { const n = p + 0.0000025; localStorage.setItem('cty_bal', n); return n; }); }, 100);
                const j = setInterval(() => { setNewsIdx(p => (p + 1) % NEWS.length); }, 4000);
                return () => { clearInterval(i); clearInterval(j); };
            }, []);

            const connect = () => {
                const mock = "0x71C...9A23";
                setAddress(mock);
                localStorage.setItem('cty_address', mock);
            };

            const referral = address ? `https://cryptinity-web4.world/?ref=${address}` : "Connect Wallet";

            return (
                <div className="min-h-screen pb-20 relative">
                    <BackgroundFX />
                    
                    {/* TOP BAR */}
                    <div className="relative z-50 bg-black/80 border-b border-white/10 backdrop-blur text-[10px] py-2 flex justify-center sticky top-0">
                        <div className="flex items-center gap-3 px-4">
                            <span className="text-red-500 font-bold flex items-center gap-1 animate-pulse"><Icon name="activity" size={10}/> LIVE</span>
                            <span className="text-blue-200 font-mono">[{NEWS[newsIdx].cat}] {NEWS[newsIdx].title}</span>
                        </div>
                    </div>

                    {/* HERO */}
                    <div className="relative z-10 max-w-6xl mx-auto px-4 pt-8">
                        <div className="flex justify-between items-center mb-12">
                            <div className="flex items-center gap-2"><img src={LOGO_URL} className="h-8" alt="Logo" /><span className="font-bold text-white">CRYPTINITY</span></div>
                            {!address ? <button onClick={connect} className="bg-blue-600 text-white px-4 py-2 rounded-full text-xs font-bold btn-glow">Connect Wallet</button> : <div className="bg-white/10 px-4 py-2 rounded-full text-xs text-green-400 font-mono">{address}</div>}
                        </div>

                        <div className="text-center mb-12">
                            <div className="inline-block px-3 py-1 rounded-full bg-blue-900/30 border border-blue-500/30 text-blue-300 text-[10px] font-bold mb-4"><Icon name="zap" size={12} className="inline mr-1"/> PROTOCOL INITIALIZING</div>
                            <h1 className="text-4xl md:text-6xl font-black text-white mb-4 neon-text">WEB4 SUPER APP</h1>
                            <p className="text-gray-400 mb-8">Social. Finance. Commerce. Unified.</p>
                            <Countdown />
                        </div>

                        <div className="grid lg:grid-cols-2 gap-8">
                            
                            {/* LEFT: MINING & WHITEPAPER */}
                            <div className="space-y-6">
                                <div className="glass-panel rounded-3xl p-6 relative overflow-hidden">
                                    <div className="absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10 opacity-50"></div>
                                    <div className="relative z-10">
                                        <div className="flex justify-between items-center mb-4">
                                            <div className="flex items-center gap-4">
                                                <div className="w-12 h-12 bg-black rounded-xl flex items-center justify-center border border-gray-700"><Icon name="cpu" size={24} className="text-blue-500 animate-pulse"/></div>
                                                <div><div className="text-xs text-gray-500 font-bold uppercase">Cloud Rig</div><div className="text-green-400 text-xs font-bold">Active (5.0 MH/s)</div></div>
                                            </div>
                                            <div className="text-right"><div className="text-[10px] text-gray-500">Balance</div><div className="text-2xl font-mono font-black text-white">{miningBal.toFixed(6)} <span className="text-sm text-blue-500">CTY</span></div></div>
                                        </div>
                                        <div className="bg-black/40 border border-white/10 rounded p-2 flex justify-between items-center text-xs text-gray-400 font-mono"><span>{referral}</span><button className="text-white hover:text-blue-400"><Icon name="copy" size={14}/></button></div>
                                    </div>
                                </div>

                                {/* WHITEPAPER */}
                                <div className="glass-panel rounded-2xl p-6 text-sm text-gray-300 space-y-4">
                                    <h3 className="text-white font-bold border-b border-white/10 pb-2 flex items-center gap-2"><Icon name="file-text" size={16}/> Official Whitepaper</h3>
                                    <p><b>Mission:</b> To build the "Infinite Loop" of the digital economy. Cryptinity is the operating system for Web4.</p>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div className="bg-black/30 p-3 rounded border border-white/5"><div className="text-xs font-bold text-blue-400 mb-1">Unity Engine</div>Consolidating Social, Finance, & Commerce.</div>
                                        <div className="bg-black/30 p-3 rounded border border-white/5"><div className="text-xs font-bold text-green-400 mb-1">CTY Token</div>Deflationary utility & Gas.</div>
                                    </div>
                                </div>

                                {/* LINKS */}
                                <div className="flex gap-4 justify-center">
                                    {SOCIAL_LINKS.map((s, i) => <a key={i} href={s.url} target="_blank" className="w-10 h-10 bg-white/5 rounded-full flex items-center justify-center hover:bg-white/10 hover:scale-110 transition-all text-gray-400 hover:text-white"><Icon name="link" size={16}/></a>)}
                                </div>
                            </div>

                            {/* RIGHT: PROFILE */}
                            <div className="h-[600px]">
                                {!address ? (
                                    <div className="h-full glass-panel rounded-3xl flex flex-col items-center justify-center text-center p-8 border-dashed border-gray-700">
                                        <Icon name="lock" size={48} className="text-gray-600 mb-4"/>
                                        <h2 className="text-xl font-bold text-white mb-2">Profile Locked</h2>
                                        <p className="text-gray-400 text-sm mb-6">Connect wallet to unlock your decentralized identity.</p>
                                        <button onClick={connect} className="bg-blue-600 text-white px-6 py-2 rounded-full text-sm font-bold btn-glow">Unlock Access</button>
                                    </div>
                                ) : (
                                    <UserProfile address={address} />
                                )}
                            </div>

                        </div>
                    </div>
                    
                    <div className="text-center text-[10px] text-gray-600 mt-12 pb-4">Â© 2025 CRYPTINITY WEB4 WORLD.</div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
        
        // Force icon render
        window.addEventListener('load', () => lucide.createIcons());
    </script>
</body>
</html>

